<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2024-05-24T20:52:23+02:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Guillem Efege</title><subtitle>Guillem Fernandez&apos;s professional web site From Developer for Developers. About Soft Skills and Hard Skills
</subtitle><author><name>Guillem Efegé</name></author><entry><title type="html">What Is the Status of BDD in Swift</title><link href="http://localhost:4000/opinion/2016-09-18-what-is-the-tatus-of-bdd-in-swift.html" rel="alternate" type="text/html" title="What Is the Status of BDD in Swift" /><published>2016-09-18T18:43:09+02:00</published><updated>2016-09-18T18:43:09+02:00</updated><id>http://localhost:4000/opinion/what-is-the-tatus-of-bdd-in-swift</id><content type="html" xml:base="http://localhost:4000/opinion/2016-09-18-what-is-the-tatus-of-bdd-in-swift.html"><![CDATA[<p>Again woking on a project with a heavy load on BDD.</p>

<p>In this case we had a greenfield project in front of us, as nothing done regarding automation was usable here. Obviously my advice was to opt for a Calabash based solution as I believe it’s a great, ‘standardised’ and long term solution.</p>

<p>Calabash is a cucumber based solution that works pretty well with iOS. Of corse you find some problems, the main one is that is an intrusive solution based on the inclusion of an http server. That server allows the communication between the cucumber Gem and the iOS app, to access to the UI elements and perform the different actions on it. That brings the problem of being dependent on the system.</p>

<p>With Swift calabash still works, but with the new UI Testing framework a new solution appears.</p>

<p>Up to now I didn’t dive into the nitty-gritties of the tool and to do it, there is no better way than creating an app.</p>

<p>It’s going to be a simple app that will only allow you to make some voice records on your iPhone, I could call it YAMVR, but probably I will go for something more glamourous.</p>

<p>So stay tunned and send any comment you have if you want me to check something special or add any feature to the app.</p>

<p>Thanks for reading me and don’t forget to follow me on twitter and check my repos in github.</p>]]></content><author><name>Guillem Efegé</name></author><category term="Opinion" /><summary type="html"><![CDATA[Again woking on a project with a heavy load on BDD.]]></summary></entry><entry><title type="html">And Now What?</title><link href="http://localhost:4000/opinion/2016-09-16-and-now-what.html" rel="alternate" type="text/html" title="And Now What?" /><published>2016-09-16T18:43:09+02:00</published><updated>2016-09-16T18:43:09+02:00</updated><id>http://localhost:4000/opinion/and-now-what</id><content type="html" xml:base="http://localhost:4000/opinion/2016-09-16-and-now-what.html"><![CDATA[<p>Once again I am there in that situation, you know, finishing the current contract and thinking about what’s coming next. This usually happens once a year or six months, depending on the contract, but this time I’ve been working for the same company for almost two years.</p>

<p>To be fair I need some fresh air, but at the same time I’m pretty tired having to look for a new project.</p>

<p>First things first, I started by updating my CV, my website, doing some housekeeping on my github repos and starting to post some new things to make some advertising.</p>

<p>As usual I’ve started by reviewing the typical web sites and applying for those job offers I believe could be interesting, sending emails to the agencies I’ve worked for before and telling my friends and colleagues that I am ‘open to new opportunities’.</p>

<p>But then the worse part of all this situation comes in. I started receiving every day up to five emails from agencies. Most of them didn’t even take five minutes to read my profile or the email I sent them, which I took my time to write hoping it would help on filtering what I was going to receive, but no, that was not the case.</p>

<p>Of those that matched my profile, casually or by reading it, many of them are urgent and almost all have these things in common:</p>

<ul>
  <li>It’s going to be the next social media cracking app.</li>
  <li>An amazing project with young and dynamic people.</li>
  <li>Working with the most advanced technologies.</li>
  <li>The next generation app.</li>
</ul>

<p>Some of them contained very different font types between paragraphs, which clearly means a copy and paste from a previous email or document. Even a couple of them were for a different person or at least my name was not in the email but another one’s was. Also most of them were looking for permanent positions, and that’s something I’d like to avoid if possible, I love to work as freelance.</p>

<p>They all looked like a factory with no interest in the quality of the product or the offer.</p>

<p>With a few good exceptions which I keep in my records, the rest are not of my interest or at least aren’t what I need to have the future I want to have.</p>

<p>At this point I realised that something was going really bad. That was not the way and there should be better, different way to find the next project.</p>

<p>After some enquiries, a friend of mine told me about Toptal App engineer community. He told me that it’s a company that does it differently.</p>

<p>I took some time to make my investigations and they seem to be the answer. The first thing they do different is the kind of questions they ask to start applying. No silly and unrelated questions, no filling questions with no sense, just the right questions. That form is destined to be the starting point for an interview, not to opt to a position but to opt to be part of the team, the pool of engineers.</p>

<p>That seems to be a new way of doing things and ensuring only the best engineers are part of it.</p>

<p>I don’t know how this new adventure is going to end, but I promise you to write a following post telling you what happened and what the experience has been for me.*</p>]]></content><author><name>Guillem Efegé</name></author><category term="Opinion" /><summary type="html"><![CDATA[Once again I am there in that situation, you know, finishing the current contract and thinking about what’s coming next. This usually happens once a year or six months, depending on the contract, but this time I’ve been working for the same company for almost two years.]]></summary></entry><entry><title type="html">MFMailComposeViewController Nightmare</title><link href="http://localhost:4000/development/tips'n'tricks/2015-01-23-mfmailcomposeviewcontroller-nightmare.html" rel="alternate" type="text/html" title="MFMailComposeViewController Nightmare" /><published>2015-01-23T10:30:03+01:00</published><updated>2015-01-23T10:30:03+01:00</updated><id>http://localhost:4000/development/tips&apos;n&apos;tricks/mfmailcomposeviewcontroller-nightmare</id><content type="html" xml:base="http://localhost:4000/development/tips&apos;n&apos;tricks/2015-01-23-mfmailcomposeviewcontroller-nightmare.html"><![CDATA[<p>I’ve just gone through MFMailComposeViewController because I had a problem with the look&amp;feel of the Cancel and Save buttons on the mail compose dialog toolbar. They just looked too, how to say, transparent. The problem was that in the app I am working on I use appearance proxy. That seemed not to work with MFMailComposeViewController.
<!-- more --></p>

<p>My first approach was to change those behavior that didn’t fit in my needs. And the result was … nothing. It’s like that doesn’t apply to it if you are using a global setting. You can find many solutions thought the internet telling you to user setTintColor on the MFMailComposeViewController object you’ve just created, and they will work if you don’t use the appearance proxy at some point of your app initialization like:</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc">    <span class="p">[[</span><span class="n">UIBarButtonItem</span> <span class="nf">appearanceWhenContainedIn</span><span class="p">:[</span><span class="n">UINavigationBar</span> <span class="nf">class</span><span class="p">],</span> <span class="nb">nil</span><span class="p">]</span> <span class="nf">setTitleTextAttributes</span><span class="p">:</span><span class="n">buttonAttributes</span> <span class="nf">forState</span><span class="p">:</span><span class="n">UIControlStateNormal</span><span class="p">];</span>

    <span class="p">[[</span><span class="n">UINavigationBar</span> <span class="nf">appearance</span><span class="p">]</span> <span class="nf">setTintColor</span><span class="p">:[</span><span class="n">UIColor</span> <span class="nf">redColor</span><span class="p">]];</span>
	</code></pre></figure>

<p>If you did it, forget about using:</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc">	<span class="p">[</span><span class="n">mailViewController</span><span class="p">.</span><span class="n">navigationBar</span> <span class="nf">setTintColor</span><span class="p">:[</span><span class="n">UIColor</span> <span class="nf">redColor</span><span class="p">]];</span>

	<span class="p">[</span><span class="n">self</span> <span class="nf">presentViewController</span><span class="p">:</span><span class="n">mailViewController</span> <span class="nf">animated</span><span class="p">:</span><span class="nb">YES</span> <span class="n">completion</span><span class="o">:</span><span class="nb">nil</span><span class="p">];</span> 
	</code></pre></figure>

<p>The result is going to be the same nothing I had.</p>

<p>But the good new is that there is a solution. I know it’s not the most elegant one but it works and you can save a lot of time investigating that I already invested. The solution is to change the global setting in the appearance proxy to match what you need and set it back to the original behavior when the dialog is dismissed.</p>

<p>As you know there is not going to be any dialog with navigation bar while the mail composer is present, it is safe to change it. To revert the changes, you need to do it in <em>- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error</em>. I use a singleton to contain the configuration colors I need to restore the original look&amp;feel, if you don’t have it, you need to implement a mechanism to do it or you’ll have a coupled and dependent code.</p>

<p>Thanks for reading and don’t forget to share and follow me in twitter @guillemfg.</p>]]></content><author><name>Guillem Efegé</name></author><category term="Development" /><category term="Tips&apos;n&apos;Tricks" /><summary type="html"><![CDATA[MFMailComposeViewController and Appearance Proxy problems]]></summary></entry><entry><title type="html">iOS 7 and iOS 8 living together</title><link href="http://localhost:4000/development/tips'n'tricks/2015-01-20-ios-7-and-ios-8-living-together.html" rel="alternate" type="text/html" title="iOS 7 and iOS 8 living together" /><published>2015-01-20T19:02:10+01:00</published><updated>2015-01-20T19:02:10+01:00</updated><id>http://localhost:4000/development/tips&apos;n&apos;tricks/ios-7-and-ios-8-living-together</id><content type="html" xml:base="http://localhost:4000/development/tips&apos;n&apos;tricks/2015-01-20-ios-7-and-ios-8-living-together.html"><![CDATA[<p>This is the first post of 2015. I want to start it with a new category, Tips and Tricks. I’ve found that in my daily work I am fixing many different small pieces of code that, in some cases, will be interesting for you, so I decided to share it in my blog.</p>

<p>The firs one is how to include code that behaves differently when it’s running on iOS 7 than when it’s running on iOS 8, for example. I’ve found two main different ways to do it.
<!-- more --></p>

<h2 id="check-the-responsiveness-to-a-selector">Check the responsiveness to a selector.</h2>

<p>Most of the times, the problem comes because of a change in the signature of an API or the deprecation of the methods. In this case the easiest way is to check if the object responds to the given selector. Two examples are NSOperation and UIApplication.</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc">    <span class="n">NSOperation</span> <span class="o">*</span><span class="n">myOperation</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSOperation</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">([</span><span class="n">myOperation</span> <span class="nf">respondsToSelector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">setName</span><span class="p">)])</span> <span class="p">{</span>
        <span class="c1">// iOS 8 specific code</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// iOS 7 speficic code</span>

    <span class="p">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc">    <span class="n">UIApplication</span> <span class="o">*</span><span class="n">app</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIApplication</span> <span class="nf">sharedApplication</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">([</span><span class="n">app</span> <span class="nf">respondsToSelector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">registerForRemoteNotifications</span><span class="p">)])</span> <span class="p">{</span>
        <span class="c1">// iOS 8 specific code</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// iOS 7 speficic code</span>

    <span class="p">}</span></code></pre></figure>

<h2 id="check-the-value-of-nsfundationversionnumber">Check the value of <em>NSFundationVersionNumber</em></h2>

<p>The second option is using <em>NSFundationVersionNumber</em>. This option gives you the flexibility to behave differently not because of any restriction, but because functional requirements or just because you like it.</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc">    <span class="k">if</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">NSFoundationVersionNumber</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">NSFoundationVersionNumber_iOS_7_0</span><span class="p">){</span>
        <span class="c1">// iOS 7.0 specific code</span>
    <span class="p">}</span><span class="k">else</span> <span class="nf">if</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">NSFoundationVersionNumber</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">NSFoundationVersionNumber_iOS_7_1</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// iOS 7.1 specific code</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// iOS 8.X specific code</span>
    <span class="p">}</span></code></pre></figure>

<p>You can use the defined constants:</p>

<ul>
  <li>NSFoundationVersionNumber_iPhoneOS_2_0</li>
  <li>NSFoundationVersionNumber_iPhoneOS_2_1</li>
  <li>NSFoundationVersionNumber_iPhoneOS_2_2</li>
  <li>NSFoundationVersionNumber_iPhoneOS_3_0</li>
  <li>NSFoundationVersionNumber_iPhoneOS_3_1</li>
  <li>NSFoundationVersionNumber_iPhoneOS_3_2</li>
  <li>NSFoundationVersionNumber_iOS_4_0</li>
  <li>NSFoundationVersionNumber_iOS_4_1</li>
  <li>NSFoundationVersionNumber_iOS_4_2</li>
  <li>NSFoundationVersionNumber_iOS_4_3</li>
  <li>NSFoundationVersionNumber_iOS_5_0</li>
  <li>NSFoundationVersionNumber_iOS_5_1</li>
  <li>NSFoundationVersionNumber_iOS_6_0</li>
  <li>NSFoundationVersionNumber_iOS_6_1</li>
  <li>NSFoundationVersionNumber_iOS_7_0</li>
  <li>NSFoundationVersionNumber_iOS_7_1</li>
</ul>

<p>Also OS X has its own ones.</p>]]></content><author><name>Guillem Efegé</name></author><category term="Development" /><category term="Tips&apos;n&apos;Tricks" /><summary type="html"><![CDATA[Responsiveness of a selector and NSFundationVersionNumber]]></summary></entry><entry><title type="html">BDD - Mastermind : Adding calabash and creating our first tests</title><link href="http://localhost:4000/development/bdd/tdd/2014-11-20-bdd-mastermind-adding-calabash-and-creating-our-first-tests.html" rel="alternate" type="text/html" title="BDD - Mastermind : Adding calabash and creating our first tests" /><published>2014-11-20T20:06:16+01:00</published><updated>2014-11-20T20:06:16+01:00</updated><id>http://localhost:4000/development/bdd/tdd/bdd-mastermind-adding-calabash-and-creating-our-first-tests</id><content type="html" xml:base="http://localhost:4000/development/bdd/tdd/2014-11-20-bdd-mastermind-adding-calabash-and-creating-our-first-tests.html"><![CDATA[<p>This is the sixth post to create an application using BDD and TDD in iOS. If you missed the previous post, my recommendation is that you read it first <a href="/blog/2014/11/10/bdd-mastermind-view-preparation/" title="BDD - Mastermind : View preparation">here</a>. If you just landed, better start on the <a href="/blog/2014/08/20/bdd-from-the-idea-to-the-app-2/" title="BDD: From the Idea to the App 2">first</a></p>

<p>In this post is where we really start doing BDD, so get ready to enter to the new and exciting world of cucumber and behaviour driven development.</p>

<!-- more -->
<h1 id="cucumber-what-is-it-and-how-to-use">Cucumber, What is it and How to use</h1>

<p>In previous post I’ve introduced the concept of cucumber, and in this post we are going to start with it. But first I’d like to give you a brief introduction about cucumber and what is it.</p>

<p>Cucumber is an set of tools that allows us to write tests in “<em>natural language</em>” that are readable by the computer and tell it what to test and how to test. Notice that I’ve written “<em>natural language</em>” between quotes and in italics. That is because we should make a couple precissions here. First, the language is natural because it can be read as a natural language written story, but is not so natural in the sense that we can’t write it as it comes, but we have to follow some conventions that describe the gherkin syntax. Second, the test, as said before, are not going to work out of the box. Eventhough there are some steps that work with no additional effort, most of the steps will need a definition from your side.</p>

<p>You could say - “<em>what’s the point in writting the tests if we have to do another development job behind?</em>”</p>

<p>Well, the advantage you get from this is the ability to have clearer tests that can be mantained with lot less effort and that can be written, read and maintained by third party and non technical people.</p>

<h1 id="back-to-school-lets-learn-some-syntax">Back to school, let’s learn some syntax</h1>

<p>A good definition of what is gerkhin is in <a href="https://pragprog.com/book/hwcuc/the-cucumber-book" title="The Pragmatic Bookshelf">The Cucumber Book: Behaviour-Driven Development for Testes and Developers</a>, an excellent book that I highly recomend you to read if you want to be a “<em>Cucumber Master</em>”.</p>

<blockquote>
  <p>“<em>Gherkin gives us a lightweight structure for documenting examples of the behavior our stakeholders want, in a way that it can be easily understood both by the stakeholders and by Cucumber.</em>”</p>
</blockquote>

<p>Let’s see an example:</p>

<figure class="highlight"><pre><code class="language-gherkin" data-lang="gherkin"><span class="kd">Feature</span><span class="p">:</span> Board behaviour
  As a Player
  I want to see how the cells react to my taps as expected
  So I can begin playing

<span class="kn">Scenario</span><span class="p">:</span> Initial situation
  <span class="nf">Given </span>I am on the Initial Screen
  <span class="nf">Then </span>a new game should be ready</code></pre></figure>

<p>You can see this peace of code is written in a way anyone could understand, well, anyone who speaks english. What about a non english speaker stake holder? Well, gherkin syntax can be written in 40 different languages. You can see a list of available languages by running cucumber gem as ‘<em>cucumber –i18n help</em>’ and you’ll be listed all available languages. At this moment, this is what my system shows.</p>

<figure class="highlight"><pre><code class="language-vctreestatus" data-lang="vctreestatus">      | ar        | Arabic              | العربية           |
      | bg        | Bulgarian           | български         |
      | bm        | Malay               | Bahasa Melayu     |
      | ca        | Catalan             | català            |
      | cs        | Czech               | Česky             |
      | cy-GB     | Welsh               | Cymraeg           |
      | da        | Danish              | dansk             |
      | de        | German              | Deutsch           |
      | el        | Greek               | Ελληνικά          |
      | en        | English             | English           |
      | en-Scouse | Scouse              | Scouse            |
      | en-au     | Australian          | Australian        |
      | en-lol    | LOLCAT              | LOLCAT            |
      | en-old    | Old English         | Englisc           |
      | en-pirate | Pirate              | Pirate            |
      | en-tx     | Texan               | Texan             |
      | eo        | Esperanto           | Esperanto         |
      | es        | Spanish             | español           |
      | et        | Estonian            | eesti keel        |
      | fa        | Persian             | فارسی             |
      | fi        | Finnish             | suomi             |
      | fr        | French              | français          |
      | gl        | Galician            | galego            |
      | he        | Hebrew              | עברית             |
      | hi        | Hindi               | हिंदी               |
      | hr        | Croatian            | hrvatski          |
      | hu        | Hungarian           | magyar            |
      | id        | Indonesian          | Bahasa Indonesia  |
      | is        | Icelandic           | Íslenska          |
      | it        | Italian             | italiano          |
      | ja        | Japanese            | 日本語             |
      | kn        | Kannada             | ಕನ್ನಡ              |
      | ko        | Korean              | 한국어             |
      | lt        | Lithuanian          | lietuvių kalba    |
      | lu        | Luxemburgish        | Lëtzebuergesch    |
      | lv        | Latvian             | latviešu          |
      | nl        | Dutch               | Nederlands        |
      | no        | Norwegian           | norsk             |
      | pa        | Panjabi             | ਪੰਜਾਬੀ              |
      | pl        | Polish              | polski            |
      | pt        | Portuguese          | português         |
      | ro        | Romanian            | română            |
      | ru        | Russian             | русский           |
      | sk        | Slovak              | Slovensky         |
      | sr-Cyrl   | Serbian             | Српски            |
      | sr-Latn   | Serbian (Latin)     | Srpski (Latinica) |
      | sv        | Swedish             | Svenska           |
      | th        | Thai                | ไทย               |
      | tl        | Telugu              | తెలుగు             |
      | tr        | Turkish             | Türkçe            |
      | tt        | Tatar               | Татарча           |
      | uk        | Ukrainian           | Українська        |
      | uz        | Uzbek               | Узбекча           |
      | vi        | Vietnamese          | Tiếng Việt        |
      | zh-CN     | Chinese simplified  | 简体中文           |
      | zh-TW     | Chinese traditional | 繁體中文           |
	  </code></pre></figure>

<p>So we could write the same peace of code we wrote before as.</p>

<figure class="highlight"><pre><code class="language-gherkin" data-lang="gherkin"><span class="kd">Característica</span><span class="p">:</span> Comportamiento del Tablero
  Como jugador
  Quiero saber como reaccionan las celdas a mis pulsaciones tal como esper
  y así poder empezar a jugar

<span class="kn">Escenario</span><span class="p">:</span> Situación inicial
  <span class="nf">Dado </span>que estoy en la pantalla inicial
  <span class="nf">Entonces </span>un nuevo juego debería estar listo</code></pre></figure>

<p>And cucumber should be able to proceed the same way as when it was written in english. Of course the steps definitions won’t be called the same or will do any translation, but we can map them.</p>

<p>Gherkin is basically a set of keywords organised in a certain way and followed by sentences that might or might not contain parameters and have to be defined as steps.</p>

<p>The keywords used by gherkin are:</p>

<ul>
  <li>First level
    <ul>
      <li>Feature</li>
      <li>Background</li>
      <li>Scenario</li>
    </ul>
  </li>
  <li>Second level
    <ul>
      <li>Given</li>
      <li>When</li>
      <li>Then</li>
      <li>And</li>
      <li>But</li>
      <li>*</li>
      <li>Scenario Outline</li>
      <li>Examples</li>
    </ul>
  </li>
</ul>

<p>First level keywords are used to separate different tests and group them, while the second level ones are to define each step or provide data to test on. I won’t go deeper on this as it is not the purpose of this port serie. As I commented before, if you really want to get more information go and buy the book <a href="https://pragprog.com/book/hwcuc/the-cucumber-book" title="The Pragmatic Bookshelf">The Cucumber Book: Behaviour-Driven Development for Testes and Developers</a>, it’s at the high level Pragmatic Programmers always offer.</p>

<h1 id="talk-is-cheap-show-me-the-code">Talk is cheap. Show me the code</h1>

<p>It all looks very nice, but, does it work? And how does that work?</p>

<p>Well, let’s start by writting our first feature.</p>

<p>If you remember a previous post in this series called <a href="/blog/2014/09/25/bdd-mastermind-internal-design/" title="Previous post reference">BDD - Mastermind : Internal Design</a>, I defined there the acceptance criterias the way a stakeholder would define them ( more or less, that’s my humble contribution ). Let’s bring it back to write a couple of them in gherkin.</p>

<ul>
  <li>The screen should contain nine rows and five columns.</li>
  <li>The left most column has to be gray.</li>
  <li>The other five columns has to be white.</li>
  <li>When I first open the app, a new game should be ready.</li>
  <li>When a new game starts, the screen should contain no colors and no results.</li>
</ul>

<p>As you can imagine there are many ways to write those acceptance criterias in gherkin. The one I choosed is the following one.</p>

<figure class="highlight"><pre><code class="language-gherkin" data-lang="gherkin"><span class="kn">Scenario</span><span class="p">:</span> Initial situation
  <span class="nf">Given </span>I am on the Initial Screen
  <span class="nf">Then </span>a new game should be ready</code></pre></figure>

<p>As you might deduct, the step “<em>Given I am on the Initial Screen</em>” includes</p>

<ul>
  <li>The screen should contain nine rows and five columns.</li>
  <li>The left most column has to be gray.</li>
  <li>The other five columns has to be white.</li>
</ul>

<p>There are, at least, two ways we can do it. Creating one step for each condition and then putting them all together in a single step called “Given I am on the Initial Screen” or creating all steps into the “Given I am on the Initial Screen”.</p>

<p>I decided to go this second way, but it would be a good practice if you try to do it the other way and see how it works the same way or even better.</p>

<p>So let’s dive into the definition of the steps.</p>

<p>First of all, go to your project folder, be sure you are in the same folder as your .xcproject and then run</p>

<figure class="highlight"><pre><code class="language-vctreestatus" data-lang="vctreestatus">$ gem install calabash-cucumber

$ calabash-ios setup
Checking if Xcode is running...</code></pre></figure>

<p>When it is finished, open the new created .xcworkspace file and build the new target you have ending in -cal . You need to do it because cucumber needs a binary to run the tests on, otherwise you are going to start having complains from cucumber.</p>

<p>In the project folder you’ll see a new folder called features, that’s where all cucumber magic lives.</p>

<p>When you open the .feature file and replace the default feature for your new feature and you run cucumber, this is what you are going to see:</p>

<figure class="highlight"><pre><code class="language-vctreestatus" data-lang="vctreestatus">╰─$ DEVICE_TARGET='iPhone 6 (8.1 Simulator)' cucumber
Feature: Board behaviour
  As a Player
  I want to see how the cells react to my taps as expected
  So I can begin playing

  Scenario: Initial situation        # features/start.feature:6
    Given I am on the Initial Screen # features/start.feature:7
    Then a new game should be ready  # features/start.feature:8

1 scenario (1 undefined)
2 steps (2 undefined)
0m15.800s

You can implement step definitions for undefined steps with these snippets:

Given(/^I am on the Initial Screen$/) do
  pending # express the regexp above with the code you wish you had
end

Then(/^a new game should be ready$/) do
  pending # express the regexp above with the code you wish you had
end</code></pre></figure>

<blockquote>
  <p>Note that the command used to run the test ‘<em>DEVICE_TARGET=’iPhone 6 (8.1 Simulator)’ cucumber</em>’. Please take a look at <a href="https://github.com/calabash/calabash-ios/wiki" title="Documentation fo Calabash">calabash documentation</a> for more options.</p>
</blockquote>

<p>You can see how cucumber helps us.</p>

<blockquote>
  <p>You can implement step definitions for undefined steps with these snippets:</p>

  <p>Given(/^I am on the Initial Screen$/) do
  pending # express the regexp above with the code you wish you had
end</p>

  <p>Then(/^a new game should be ready$/) do
  pending # express the regexp above with the code you wish you had
end</p>
</blockquote>

<p>Those are the steps you need to implement inside your features/step_definitions/mastermind_steps.rb file. Let’s take a look on how I’ve defined them.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Given</span> <span class="sr">/^I am on the Initial Screen$/</span> <span class="k">do</span>
  <span class="c1"># The screen should contain nine rows and five columns</span>
  <span class="n">rows</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="s2">"view {accessibilityLabel BEGINSWITH 'Combination Row'}"</span><span class="p">)</span>
  <span class="nb">fail</span><span class="p">(</span><span class="s2">"The screen should contain nine rows"</span><span class="p">)</span> <span class="k">if</span> <span class="n">rows</span><span class="p">.</span><span class="nf">count</span> <span class="o">!=</span> <span class="mi">9</span>
  
  <span class="c1"># Following the mock, those rows have to be as wide as the screen</span>
  <span class="n">window</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="s2">"window"</span><span class="p">)</span>
  <span class="n">rows</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">row</span><span class="o">|</span>
    <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s2">"frame"</span><span class="p">][</span><span class="s2">"width"</span><span class="p">]</span> <span class="o">!=</span> <span class="n">window</span><span class="p">.</span><span class="nf">first</span><span class="p">[</span><span class="s2">"frame"</span><span class="p">][</span><span class="s2">"width"</span><span class="p">]</span>
       <span class="nb">fail</span><span class="p">(</span><span class="s2">"All rows have to be as wide as the screen"</span><span class="p">)</span> 
    <span class="k">end</span>
  <span class="k">end</span>
  <span class="c1"># Following the mock, the rows have distributed along the screen  </span>
  <span class="n">lastFloor</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">rows</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">row</span><span class="o">|</span>
    <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s2">"frame"</span><span class="p">][</span><span class="s2">"y"</span><span class="p">]</span> <span class="o">!=</span> <span class="n">lastFloor</span>
       <span class="nb">fail</span><span class="p">(</span><span class="s2">"Each row has to be after the previous one, expecting </span><span class="si">#{</span><span class="n">lastFloor</span><span class="si">}</span><span class="s2">, </span><span class="si">#{</span><span class="n">row</span><span class="p">[</span><span class="s2">"frame"</span><span class="p">][</span><span class="s2">"y"</span><span class="p">]</span><span class="si">}</span><span class="s2"> found"</span><span class="p">)</span> 
    <span class="k">end</span>
    <span class="nb">fail</span><span class="p">(</span><span class="s2">"All rows should be higher than zero"</span><span class="p">)</span> <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s2">"frame"</span><span class="p">][</span><span class="s2">"height"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="n">lastFloor</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">"frame"</span><span class="p">][</span><span class="s2">"y"</span><span class="p">]</span> <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s2">"frame"</span><span class="p">][</span><span class="s2">"height"</span><span class="p">]</span>
  <span class="k">end</span>
  
  <span class="c1"># All rows are combination</span>
  <span class="n">rows</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">row</span><span class="o">|</span>
    <span class="nb">fail</span><span class="p">(</span><span class="s2">"All rows must be combination rows but </span><span class="si">#{</span><span class="n">row</span><span class="p">[</span><span class="s2">"class"</span><span class="p">]</span><span class="si">}</span><span class="s2"> was found"</span><span class="p">)</span> <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s2">"class"</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">"MMCombinationRow"</span>
  <span class="k">end</span>
  
  <span class="nb">sleep</span><span class="p">(</span><span class="no">STEP_PAUSE</span><span class="p">)</span>
<span class="k">end</span>

<span class="no">Then</span><span class="p">(</span><span class="sr">/^a new game should be ready$/</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">rows</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="s2">"view {accessibilityLabel BEGINSWITH 'Combination Row'}"</span><span class="p">)</span>

  <span class="n">rows</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">row</span><span class="o">|</span>
    
    <span class="n">combination</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">"label"</span><span class="p">][</span><span class="mi">18</span><span class="o">..</span><span class="mi">23</span><span class="p">]</span>
    <span class="nb">fail</span><span class="p">(</span><span class="s2">"All rows combinations must be empty but </span><span class="si">#{</span><span class="n">combination</span><span class="si">}</span><span class="s2"> was found"</span><span class="p">)</span> <span class="k">if</span> <span class="n">combination</span> <span class="o">!=</span> <span class="s2">"'    '"</span>
  <span class="k">end</span>

<span class="k">end</span></code></pre></figure>

<p>To match one buy one the acceptance criterias with the steps let’s split it.</p>

<ul>
  <li>The screen should contain nine rows and five columns.</li>
</ul>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">  <span class="c1"># The screen should contain nine rows and five columns</span>
  <span class="n">rows</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="s2">"view {accessibilityLabel BEGINSWITH 'Combination Row'}"</span><span class="p">)</span>
  <span class="nb">fail</span><span class="p">(</span><span class="s2">"The screen should contain nine rows"</span><span class="p">)</span> <span class="k">if</span> <span class="n">rows</span><span class="p">.</span><span class="nf">count</span> <span class="o">!=</span> <span class="mi">9</span></code></pre></figure>

<p>Previoulsy to this step, you can find a new class in the code called <em>MMCombinationRow</em> that has been created with TDD and ensures containing five cells, one result cell and four color cells. So what’s missing here is the number of rows.</p>

<p>Another way to implement this check is:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">  <span class="c1"># The screen should contain nine rows and five columns</span>
  <span class="n">rows</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="s2">"MMCombinationRow"</span><span class="p">)</span>
  <span class="nb">fail</span><span class="p">(</span><span class="s2">"The screen should contain nine rows"</span><span class="p">)</span> <span class="k">if</span> <span class="n">rows</span><span class="p">.</span><span class="nf">count</span> <span class="o">!=</span> <span class="mi">9</span></code></pre></figure>

<p>Go and implement the rest and see how it fails and what have you got to change to make it pass and then go and run the unit tests to ensure you didn’t break anything.</p>

<p>If all goes fine, just making a <em>git checkout</em> of <a href="https://github.com/guillemf/Mastermind-BDD/tree/Step_7" title="MasterMind-BDD Step7">Step 7</a> and you should see something like this:</p>

<iframe width="560" height="420" src="http://www.youtube.com/embed/RYihMe_5yws?color=white&amp;theme=light"></iframe>

<p>Remember you can find the code of this post in <a href="https://github.com/guillemf/Mastermind-BDD/tree/Step_8" title="MasterMind-BDD Step5">this commit, Step 8</a>.</p>

<p>If you like it, please share! Thank you for reading me.</p>]]></content><author><name>Guillem Efegé</name></author><category term="Development" /><category term="BDD" /><category term="TDD" /><summary type="html"><![CDATA[This is the sixth post to create an application using BDD and TDD in iOS. If you missed the previous post, my recommendation is that you read it first here. If you just landed, better start on the first]]></summary></entry><entry><title type="html">BDD - Mastermind : View preparation</title><link href="http://localhost:4000/development/bdd/tdd/2014-11-10-bdd-mastermind-view-preparation.html" rel="alternate" type="text/html" title="BDD - Mastermind : View preparation" /><published>2014-11-10T13:25:00+01:00</published><updated>2014-11-10T13:25:00+01:00</updated><id>http://localhost:4000/development/bdd/tdd/bdd-mastermind-view-preparation</id><content type="html" xml:base="http://localhost:4000/development/bdd/tdd/2014-11-10-bdd-mastermind-view-preparation.html"><![CDATA[<p>This is the fifth post to create an application using BDD and TDD in iOS. If you missed the previous post, my recommendation is that you read it first <a href="/blog/2014/10/21/bdd-mastermind-view-preparation-to-make-the-ui-testable/" title="BDD - Mastermind : View preparation to make the UI testable">here</a>.</p>

<p>In the previous post I went through a way to test the visible result of the custom view in a very intuitive way. It was just an exercise to test how, in a simple way, we could have a complete test of how we expect our view looks like. The truth is that this is a feeble method as it depends on an image that might or might not be 100% achievable by the tools we can make use of.</p>

<p>The purpose of the previous post was to introduce the technique we are going to use in this post. We are going to go through a technique that allows us to test the final behavior in a more secure and maintainable way.</p>

<p>You can find the code corresponding to this post in <a href="https://github.com/guillemf/Mastermind-BDD/tree/Step_6" title="MasterMind-BDD Step6">this commit</a>. Go and get it!
<!-- more --></p>
<h1 id="the-result-cells">The result cells</h1>

<p><img class="left" src="https://farm3.staticflickr.com/2941/15101651020_46fb32d967_o.jpg" width="190" height="490" title="Mastermind Sketch With zones" alt="Mastermind board Sketch with zones" /></p>

<p>The second element we have on the screen is the results cell. If you remember from the first post of the series, we defined three areas to consider. Area number three is a special kind of view that provides different visual aspects depending on the result we are providing. The rules are described in the second post of the series <a href="/blog/2014/09/25/bdd-mastermind-internal-design/" title="BDD - Mastermind : Internal design">BDD - Mastermind : Internal design</a>, but we need add a few more “conditions” to have a really robust view that does what we want it to do.</p>

<p><strong>First</strong> - We are only accepting two different symbols, no matter which symbols but just two different.<br />
<strong>Second</strong> - If the first symbol is a space, then it is considered there are no symbols of the first type and all the symbols are considered second kind.<br />
<strong>Third</strong> - As there is no specification, the circles will try to fill as much space as possible. One symbol will end in a single big circle.</p>

<p>With this in mind we have enough information to start creating the tests to implement the result cell.</p>

<h1 id="test-and-implementation">Test and implementation</h1>

<p>A very common practice is to create helper methods to simplify the test and provide more clarity. In this case we need to create a combination generator, so I implement this random combination generators.</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="c1">// Helper Methods</span>
<span class="k">-</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">generateRandomCharString</span>
<span class="p">{</span>
    <span class="c1">// Available symbols</span>
    <span class="n">NSString</span> <span class="o">*</span><span class="n">symbols</span> <span class="o">=</span> <span class="s">@"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"</span><span class="p">;</span>
    
    <span class="c1">// Pick a random index to extract two symbols</span>
    <span class="kt">int</span> <span class="n">symbolIndex</span> <span class="o">=</span> <span class="n">arc4random_uniform</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">symbols</span><span class="p">.</span><span class="n">length</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>

    <span class="c1">// Obtain the two random symbols</span>
    <span class="n">NSString</span> <span class="o">*</span><span class="n">symbol</span> <span class="o">=</span> <span class="p">[</span><span class="n">symbols</span> <span class="nf">substringWithRange</span><span class="p">:</span><span class="n">NSMakeRange</span><span class="p">(</span><span class="n">symbolIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">)];</span>
    
    <span class="c1">// Obtain random number of each symbols</span>
    <span class="kt">int</span> <span class="n">length</span> <span class="o">=</span> <span class="n">arc4random_uniform</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    
    <span class="n">NSMutableString</span> <span class="o">*</span><span class="n">resultString</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableString</span> <span class="nf">stringWithString</span><span class="p">:</span><span class="s">@""</span><span class="p">];</span>
    
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">n</span><span class="o">&lt;</span><span class="n">length</span><span class="p">;</span> <span class="n">n</span><span class="o">++</span><span class="p">)</span>
        <span class="p">[</span><span class="n">resultString</span> <span class="nf">appendString</span><span class="p">:</span><span class="n">symbol</span><span class="p">];</span>
    
    <span class="k">return</span> <span class="p">[</span><span class="n">resultString</span> <span class="nf">copy</span><span class="p">];</span>
    
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">generateRandomResult</span>
<span class="p">{</span>
    <span class="n">NSMutableString</span> <span class="o">*</span><span class="n">resultString</span> <span class="o">=</span> <span class="p">[[</span><span class="n">self</span> <span class="nf">generateRandomCharString</span><span class="p">]</span> <span class="nf">mutableCopy</span><span class="p">];</span>
    <span class="k">return</span> <span class="p">[[</span><span class="n">resultString</span> <span class="nf">stringByAppendingString</span><span class="p">:[</span><span class="n">self</span> <span class="nf">generateRandomCharString</span><span class="p">]]</span> <span class="nf">copy</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="p">)</span><span class="nf">dataForCellPNGRepresentationForView</span><span class="p">:(</span><span class="n">UIView</span> <span class="o">*</span><span class="p">)</span><span class="nv">view</span>
<span class="p">{</span>
    <span class="n">UIGraphicsBeginImageContext</span><span class="p">(</span><span class="n">view</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">size</span><span class="p">);</span>
    <span class="p">[</span><span class="n">view</span><span class="p">.</span><span class="n">layer</span> <span class="nf">renderInContext</span><span class="p">:</span><span class="n">UIGraphicsGetCurrentContext</span><span class="p">()];</span>
    <span class="n">UIImage</span><span class="o">*</span> <span class="n">image1</span> <span class="o">=</span> <span class="n">UIGraphicsGetImageFromCurrentImageContext</span><span class="p">();</span>
    <span class="n">UIGraphicsEndImageContext</span><span class="p">();</span>
    <span class="k">return</span> <span class="n">UIImagePNGRepresentation</span><span class="p">(</span><span class="n">image1</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<ul>
  <li><strong>generateRandomCharString</strong> - Is used to generate a string of random lenght of a random symbol. As you can see I previously have defined the array of valid symbols which contain no space. A good practice would be to add a test to check that any symbol placed is included in the set of valid symbols.</li>
  <li><strong>generateRandomResult</strong> - Is the method used to create a combination of two symbols.</li>
  <li><strong>dataForCellPNGRepresentationForView</strong> - Is the method used to obtain a png representation of the view. That is the way we can compare two views at visual level.</li>
</ul>

<p>Now that we have all we need, let’s write some tests. I won’t go though each test as they are trivial, just list them.</p>

<ul>
  <li>Test that on init the background is transparent.</li>
  <li>Test that on init the combination value is empty.</li>
  <li>Test that when the combination changes bezier path changes.</li>
  <li>Test that when the combination is empty bezier paths contains zero circles.</li>
  <li>Test that when the combination changes bezier paths contains the same number of circles as the length of the combination.</li>
  <li>Test that when the combination has more than two different symbols only first two are stored.</li>
  <li>Test that when the combination changes bezier paths contains only bezier paths;</li>
</ul>

<h1 id="the-final-method-for-testing-the-visual-result">The final method for testing the visual result</h1>

<p>As I commented before, testing against images has some important limitations like depending on the device implementation, small changes makes the test fail, etc … So, which is the best way to do it? Well nothing better than comparing a view with another view. That way we can be sure there is no difference and we can update easily the implementation.</p>

<p>To do it, you just need to create a view that looks like what you expect your view to look like.</p>

<p>You might think, that is duplicating the effort.</p>

<p>Well, create a dummy view that just does one thing is not duplicating the effort, is prototyping what you expect to obtain and also lets you define some rules that you might translate to your view.</p>

<p>Let’s take a look at the dummy view I’ve implemented and you’ll understand better what I mean.</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="c1">// Dummy view to draw the image we expect</span>

<span class="k">@interface</span> <span class="nc">DummyView</span> <span class="p">:</span> <span class="nc">UIView</span>

<span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">strong</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">combination</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">strong</span><span class="p">)</span> <span class="n">UIColor</span> <span class="o">*</span><span class="n">color</span><span class="p">;</span>

<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">DummyView</span>

<span class="k">-</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="nf">initWithFrame</span><span class="p">:(</span><span class="n">CGRect</span><span class="p">)</span><span class="nv">frame</span> <span class="nf">combination</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">combination</span> <span class="nf">color</span><span class="p">:(</span><span class="n">UIColor</span> <span class="o">*</span><span class="p">)</span><span class="nv">color</span>
<span class="p">{</span>
    <span class="n">self</span> <span class="o">=</span> <span class="p">[</span><span class="n">super</span> <span class="nf">initWithFrame</span><span class="p">:</span><span class="n">frame</span><span class="p">];</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">self</span><span class="p">.</span><span class="n">combination</span> <span class="o">=</span> <span class="n">combination</span><span class="p">;</span>
        <span class="n">self</span><span class="p">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">;</span>
        <span class="n">self</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="nf">clearColor</span><span class="p">];</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="n">self</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">drawRect</span><span class="p">:(</span><span class="n">CGRect</span><span class="p">)</span><span class="nv">rect</span> <span class="p">{</span>
    <span class="c1">// Obtain first char</span>
    <span class="n">unichar</span> <span class="n">leftchar</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">combination</span> <span class="nf">characterAtIndex</span><span class="p">:</span><span class="mi">0</span><span class="p">];</span>
    <span class="n">NSString</span> <span class="o">*</span><span class="n">combination</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">combination</span> <span class="nf">stringByReplacingOccurrencesOfString</span><span class="p">:</span><span class="s">@" "</span> <span class="nf">withString</span><span class="p">:</span><span class="s">@""</span><span class="p">];</span>
    <span class="c1">// Obtain rectangle ration</span>
    <span class="kt">float</span> <span class="n">K</span> <span class="o">=</span> <span class="n">rect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="o">/</span><span class="n">rect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">;</span>
    <span class="c1">// Obtain number of items</span>
    <span class="kt">long</span> <span class="n">N</span> <span class="o">=</span> <span class="n">combination</span><span class="p">.</span><span class="n">length</span><span class="p">;</span>
    
    <span class="c1">// Obtain grid sizes</span>
    <span class="kt">float</span> <span class="n">verItems</span> <span class="o">=</span> <span class="n">ceil</span><span class="p">(</span><span class="n">sqrtf</span><span class="p">(</span><span class="n">K</span><span class="o">*</span><span class="n">N</span><span class="p">));</span>
    <span class="kt">float</span> <span class="n">horItems</span> <span class="o">=</span> <span class="n">ceil</span><span class="p">(</span><span class="n">sqrtf</span><span class="p">(</span><span class="n">N</span><span class="o">/</span><span class="n">K</span><span class="p">));</span>
    
    <span class="c1">// Items horizontally</span>
    <span class="kt">float</span> <span class="n">gridHeigh</span> <span class="o">=</span> <span class="n">rect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span> <span class="o">/</span> <span class="n">verItems</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">gridWidth</span> <span class="o">=</span> <span class="n">rect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span> <span class="o">/</span> <span class="n">horItems</span><span class="p">;</span>
    
    <span class="c1">// Draw circles</span>
    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">color</span> <span class="nf">setFill</span><span class="p">];</span>
    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">color</span> <span class="nf">setStroke</span><span class="p">];</span>
    
    <span class="n">UIBezierPath</span> <span class="o">*</span><span class="n">bezPath</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">currentElement</span><span class="p">;</span>
    
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">y</span><span class="o">&lt;</span><span class="n">verItems</span><span class="p">;</span> <span class="n">y</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">x</span><span class="o">&lt;</span><span class="n">horItems</span><span class="p">;</span> <span class="n">x</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">currentElement</span> <span class="o">=</span> <span class="p">(</span><span class="n">horItems</span><span class="o">*</span><span class="n">y</span><span class="p">)</span><span class="o">+</span><span class="n">x</span> <span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">currentElement</span> <span class="o">&gt;=</span> <span class="n">N</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">bezPath</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIBezierPath</span> <span class="nf">bezierPathWithOvalInRect</span><span class="p">:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">gridWidth</span><span class="p">,</span> <span class="n">y</span><span class="o">*</span><span class="n">gridHeigh</span><span class="p">,</span> <span class="n">gridWidth</span><span class="p">,</span> <span class="n">gridHeigh</span><span class="p">)];</span>
            <span class="k">if</span> <span class="p">([</span><span class="n">combination</span> <span class="nf">characterAtIndex</span><span class="p">:</span><span class="n">currentElement</span><span class="p">]</span> <span class="o">==</span> <span class="n">leftchar</span><span class="p">)</span> <span class="p">{</span>
                <span class="p">[</span><span class="n">bezPath</span> <span class="nf">fill</span><span class="p">];</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="p">[</span><span class="n">bezPath</span> <span class="nf">stroke</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="k">@end</span></code></pre></figure>

<p>This is the final implementation of the view, but usually it will grow with your development. Adding new features that you expect to find in your view. And more important, will protect you from changing what you expect to see if you make any change in your code in the future.</p>

<p>With that in mind, the tests become a lot more clear.</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">testIfNewResultHasOnlyOneSymbolByDefaultAreFirstSymbol</span>
<span class="p">{</span>
    <span class="n">resultCell</span><span class="p">.</span><span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="nf">generateRandomCharString</span><span class="p">];</span>
    <span class="n">resultCell</span><span class="p">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">arc4random_uniform</span><span class="p">(</span><span class="mi">300</span><span class="p">),</span> <span class="n">arc4random_uniform</span><span class="p">(</span><span class="mi">300</span><span class="p">));</span>
    
    <span class="n">DummyView</span> <span class="o">*</span><span class="n">dummyV</span> <span class="o">=</span> <span class="p">[[</span><span class="n">DummyView</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithFrame</span><span class="p">:</span><span class="n">resultCell</span><span class="p">.</span><span class="n">frame</span>
                                             <span class="nl">combination:</span><span class="n">resultCell</span><span class="p">.</span><span class="n">result</span>
                                                   <span class="nl">color:</span><span class="n">resultCell</span><span class="p">.</span><span class="n">color</span><span class="p">];</span>
    
    <span class="n">NSData</span> <span class="o">*</span><span class="n">expectedImage</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="nf">dataForCellPNGRepresentationForView</span><span class="p">:</span><span class="n">dummyV</span><span class="p">];</span>
    
    <span class="n">NSData</span> <span class="o">*</span><span class="n">obtainedImage</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="nf">dataForCellPNGRepresentationForView</span><span class="p">:</span><span class="n">resultCell</span><span class="p">];</span>
    
    
    <span class="n">XCTAssertEqualObjects</span><span class="p">(</span><span class="n">expectedImage</span><span class="p">,</span> <span class="n">obtainedImage</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<ol>
  <li>Create our view.</li>
  <li>Create a dummy view with the same parameters.</li>
  <li>Extract the representing images.</li>
  <li>Check both match.</li>
</ol>

<p>Take a look at the rest of the test, I think they are pretty clear, but if you believe there is something you can’t see, just send me an email or leave me a comment.</p>

<p>And with this post I finish with the TDD by now and we can start with the BDD.</p>

<p>Please, leave me comments, share and like if you can! See you in the next post.</p>]]></content><author><name>Guillem Efegé</name></author><category term="Development" /><category term="BDD" /><category term="TDD" /><summary type="html"><![CDATA[This is the fifth post to create an application using BDD and TDD in iOS. If you missed the previous post, my recommendation is that you read it first here.]]></summary></entry><entry><title type="html">BDD - Mastermind : View preparation to make the UI testable</title><link href="http://localhost:4000/development/bdd/tdd/2014-10-21-bdd-mastermind-view-preparation-to-make-the-ui-testable.html" rel="alternate" type="text/html" title="BDD - Mastermind : View preparation to make the UI testable" /><published>2014-10-21T17:43:42+02:00</published><updated>2014-10-21T17:43:42+02:00</updated><id>http://localhost:4000/development/bdd/tdd/bdd-mastermind-view-preparation-to-make-the-ui-testable</id><content type="html" xml:base="http://localhost:4000/development/bdd/tdd/2014-10-21-bdd-mastermind-view-preparation-to-make-the-ui-testable.html"><![CDATA[<p>This is the fourth post to create an application using BDD and TDD in iOS. If you missed the previous post, my recommendation is that you read it first <a href="/blog/2014/09/29/bdd-mastermind-tdd-in-the-model/" title="BDD - Mastermind : TDD in the Model">here</a>.</p>

<p>If you thought we were going to jump straight to BDD I’m afraid you’ll have to wait a little more. To understand it, first of all I’m going to explain which is the framework I decided to use to BDD and how does it work. With all that info you’ll understand why we need to prepare the things to be able to BDD.</p>

<p>You can find the code corresponding to this post in <a href="https://github.com/guillemf/Mastermind-BDD/tree/Step_5" title="MasterMind-BDD Step5">this commit</a>. Go and get it!</p>

<!-- more -->
<h1 id="calabash">Calabash</h1>
<h4 id="automated-acceptance-testing-for-mobile-apps">AUTOMATED ACCEPTANCE TESTING FOR MOBILE APPS</h4>

<p>If you go to <a href="http://calaba.sh" title="Automated Acceptance Testing for iOS and Android Apps">calabash web site</a> you’ll find this definition.</p>

<blockquote>
  <p>Calabash enables you to write and execute automated acceptance tests of mobile apps. Calabash is cross-platform, supporting Android and iOS native apps. It is open source and free, and has a company, Xamarin, backing and developing it.</p>
</blockquote>

<p>The reasons I decided to go with calabash after some investigation and research are diverse. First of all was the ease of integrating it in your projects. Opposite to other platforms it is just a question of a few sentences to be able to integrate it. Second, it works with <em>cucumber</em>. I really love cucumber as a way to interface with non technical people and be able to understand the same things and write acceptance criterias that we both understand and agree, and more important, we can convert them in tests.</p>

<p>When you are done with this post, never before ;), you can go to <a href="https://github.com/calabash/calabash-ios" title="calabash-ios github repository">github calabash iOS repository</a> and read how to install the gem and integrate it in your projects so you are able to follow the steps of this series of posts while you build your own, secure and testable app.</p>

<p>What’s more important to understand in this post is that calabash works with the accessibility labels to inspect and perform tasks on the simulator and the device. That’s the reason why we can’t go straight to the tests when we are going to create an app that contains a bunch of custom views and we need to see if that view is red, blue, green or yellow for example. Sadly this is something we can’t get out of the box by now. But the good news are that we can create a view that is testable in that way.</p>

<h2 id="creating-testable-views---tdd-to-the-rescue">Creating Testable Views - TDD to the rescue</h2>

<p>First thing we need to do is to convert what is a view perception into an accessible label. How are we going to do it? Keep reading and you’ll know how.</p>

<p>As usual we’ll start by creating a test file to test what I decided to call MMCell.</p>

<p>The strategy used to create a view that behaves as we want it to behave visually when we can’t test that it really happens is to break it in to parts. One is tested with TDD and ensures that when setting properties on a view the visual changes happens as we expect. The other part is that those visual changes are expressed in a simple way in the accessibility label.</p>

<p>To do it we’ll use two properties.</p>

<ul>
  <li><strong>bezierPath</strong> : This is a <em>readonly</em> property that will reflect the shape that is going to be drawn in the view. This we can verify what is being drawn in the view.</li>
  <li><strong>color</strong> : This is a property to allow the app set the color of the circle that’s going to be shown in the view.</li>
</ul>

<p>To better understand how we are going to make it, let’s take a look at the first test:</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">testWhenSizeChangesPathSizeChanges</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">width</span> <span class="o">=</span> <span class="n">arc4random_uniform</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">height</span> <span class="o">=</span> <span class="n">arc4random_uniform</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
    <span class="n">cell</span><span class="p">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">);</span>
    <span class="n">UIBezierPath</span> <span class="o">*</span><span class="n">expectedBezier</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIBezierPath</span> <span class="nf">bezierPathWithOvalInRect</span><span class="p">:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)];</span>

    <span class="n">XCTAssertTrue</span><span class="p">(</span><span class="n">CGPathEqualToPath</span><span class="p">([</span><span class="n">expectedBezier</span> <span class="nf">CGPath</span><span class="p">],</span> <span class="p">[</span><span class="n">cell</span><span class="p">.</span><span class="n">bezierPath</span> <span class="nf">CGPath</span><span class="p">]),</span>
                  <span class="s">@"Bezier Path does not match expected shape"</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>The test is very simple. We get a random height and a random width, both between 0 and 200, and check that when we set the frame of the view the path generated matches what we expect. This doesn’t guarantees that this is what is going to be drawn. To do it we need to go one step forward.</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">testFillIsCalledOnBezierPathWhenDrawRectIsCalled</span>
<span class="p">{</span>
    <span class="n">id</span> <span class="n">bezierMock</span> <span class="o">=</span> <span class="n">OCMPartialMock</span><span class="p">(</span><span class="n">cell</span><span class="p">.</span><span class="n">bezierPath</span><span class="p">);</span>
    
    <span class="n">OCMStub</span><span class="p">([</span><span class="n">bezierMock</span> <span class="nf">fill</span><span class="p">]).</span><span class="n">andForwardToRealObject</span><span class="p">;</span>
    
    <span class="p">[</span><span class="n">cell</span> <span class="nf">drawRect</span><span class="p">:</span><span class="n">cell</span><span class="p">.</span><span class="n">bounds</span><span class="p">];</span>
    
    <span class="n">OCMVerify</span><span class="p">([</span><span class="n">bezierMock</span> <span class="nf">fill</span><span class="p">]);</span>
<span class="p">}</span></code></pre></figure>

<p>This test what basically does is to check if, when drawRect is called also fill is called on bezierPath object. To do it I use one of the best friends you can have when TDDing, <strong>Mocks</strong>. Sadly this is something that is not natively implemented in XCTest, so we need to find third party developments to use it. There are different libraries that implement mocks for iOS. In this case I decided to choose <a href="http://ocmock.org/" title="OCMock Web Site">OCMock</a> which is a very well known and tested libraries, but <a href="https://github.com/jonreid/OCMockito" title="OCMockito GitHub Page">OCMockito</a> is also an excellent option.</p>

<p>Basically a mock is an object that “replaces” totally or partially the object you are trying to test or an object you want to behave in a certain way so you check what happens or make things happen in a controlled environment.</p>

<p>I know this sounds a little weird, so if you want me to write a full post about Mocking in iOS, please ask me for it in the comments or twitter and I’ll prepare it.</p>

<p>This is a good moment to introduce another player that will join you projects very often.</p>

<h1 id="cocoapods">CocoaPods</h1>

<p>If you are already familiar with CocoaPods you can jump straight to <a href="#testinwhatitlookslike">Testing what it looks like</a>.</p>

<p>In <a href="http://cocoapods.org" title="CocoaPods Web Site">CocoaPods Web Site</a> they define themselves as</p>

<blockquote>
  <p>CocoaPods is the dependency manager for Objective-C projects. It has thousands of libraries and can help you scale your projects elegantly.</p>
</blockquote>

<p>I would add to it that they do it in an <em>awesome and very clean way</em>.</p>

<p>Until I discovered CocoaPods I needed to include, organize and maintain third party developments manually. CocoaPods let’s you do it all in a very clean and isolated way so you can start using the those libraries in less than five minutes.</p>

<p>Let’s see how to do it in our case.</p>

<p>You have a very complete instruction set in <a href="http://cocoapods.org" title="CocoaPods Web Site">CocoaPods Web Site</a> but basically is three steps.</p>

<ol>
  <li>Install the gem with <em>sudo gem install cocoapods</em>.</li>
  <li>Create a file named “<em>Podfile</em>” in the same folder you have your .xcodeproj file and include the information you need in it.</li>
  <li>Run <em>pod install</em> from the terminal in that folder.</li>
</ol>

<p>After those three simple steps you’ll have a new .xcworkspace file with two projects in it, one your project and the other the project to build the pods library.</p>

<p>From this point you just need to include the pod header you need in each file you need it. In this case by now I just need to include <strong>&lt;OCMock/OCMock.h&gt;</strong> in the Test File.</p>

<p>The content of this first version of the Podfile is the following.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source 'https://github.com/CocoaPods/Specs.git'

platform :ios, '8.0'

xcodeproj 'MasterMind'

target :MasterMindTests do
    pod 'OCMock', '~&gt; 3.1.1'
end
</code></pre></div></div>

<p>Note that I added the pod only to the Test target, that means this pod won’t be available in release target, which is what we want.</p>

<h1 id="testing-what-it-looks-like">Testing what it looks like<a name="testinwhatitlookslike"></a></h1>

<p>We need to do the same we’ve done with bezierPath with color so we ensure that “<em>setFill</em>” is called on color property when “<em>drawRect</em>” is called on the view.</p>

<p>This test will make it.</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">testSetFillIsCalledOnColorWhenDrawRectIsCalled</span>
<span class="p">{</span>
    <span class="n">id</span> <span class="n">colorMock</span> <span class="o">=</span> <span class="n">OCMPartialMock</span><span class="p">(</span><span class="n">cell</span><span class="p">.</span><span class="n">color</span><span class="p">);</span>
    
    <span class="n">OCMStub</span><span class="p">([</span><span class="n">colorMock</span> <span class="nf">setFill</span><span class="p">]).</span><span class="n">andForwardToRealObject</span><span class="p">;</span>
    
    <span class="p">[</span><span class="n">cell</span> <span class="nf">drawRect</span><span class="p">:</span><span class="n">cell</span><span class="p">.</span><span class="n">bounds</span><span class="p">];</span>
    
    <span class="n">OCMVerify</span><span class="p">([</span><span class="n">colorMock</span> <span class="nf">setFill</span><span class="p">]);</span>
<span class="p">}</span></code></pre></figure>

<p>At this point we know the properties are set, updated on changes, called SetNeedsDiplay to request redraw ( look at the code ) and we are sure that they are called when drawRect is called, but how can we ensure the last result is what we expect to be. There are many ways to do it so here is what I suggest in this case. Remember I’m not trying to be exhaustive in this series but create an exercise to show you all the possibilities we have so far to test an app.</p>

<p>The best way to let the test see if the final result is what we want is compare it with an image that represents what we want, so that’s what we are going to do. In this case I took some images that represents what the view should look like in different circumstances. Those are:</p>

<table>
	<tr>
		<td><img src="https://farm6.staticflickr.com/5610/15597069961_c34ebc6b67_o.png" /></td>
		<td><img src="https://farm6.staticflickr.com/5597/15413734867_80e3391e9f_o.png" /></td>
		<td><img src="https://farm4.staticflickr.com/3953/15413114649_192d2a1f54_o.png" /></td>
		<td><img src="https://farm4.staticflickr.com/3944/15413734757_cf408a786c_o.png" /></td>
	</tr>
</table>

<p>Now, how to check the view against the image? This is the test.</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">testViewMatchesExpectedImage</span>
<span class="p">{</span>

    <span class="n">cell</span><span class="p">.</span><span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="nf">redColor</span><span class="p">];</span>
    <span class="n">cell</span><span class="p">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
    
    <span class="n">NSString</span><span class="o">*</span> <span class="n">fileImageName</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSBundle</span> <span class="nf">bundleForClass</span><span class="p">:[</span><span class="n">self</span> <span class="nf">class</span><span class="p">]]</span> <span class="nf">pathForResource</span><span class="p">:</span><span class="s">"testImageRed"</span> <span class="nf">ofType</span><span class="p">:</span><span class="s">@"png"</span><span class="p">];</span>
    <span class="n">UIImage</span> <span class="o">*</span><span class="n">fileImageObj</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIImage</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithContentsOfFile</span><span class="p">:</span><span class="n">fileImageName</span><span class="p">];</span>
    <span class="n">UIImage</span> <span class="o">*</span><span class="n">expectedImage</span> <span class="o">=</span> <span class="n">UIImagePNGRepresentation</span><span class="p">(</span><span class="n">fileImageObj</span><span class="p">);</span>

    <span class="n">UIGraphicsBeginImageContext</span><span class="p">(</span><span class="n">cell</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">size</span><span class="p">);</span>
    <span class="p">[</span><span class="n">cell</span><span class="p">.</span><span class="n">layer</span> <span class="nf">renderInContext</span><span class="p">:</span><span class="n">UIGraphicsGetCurrentContext</span><span class="p">()];</span>
    <span class="n">UIImage</span><span class="o">*</span> <span class="n">image1</span> <span class="o">=</span> <span class="n">UIGraphicsGetImageFromCurrentImageContext</span><span class="p">();</span>
    <span class="n">UIGraphicsEndImageContext</span><span class="p">();</span>
    <span class="n">UIImage</span> <span class="o">*</span><span class="n">viewImage</span><span class="o">=</span>  <span class="n">UIImagePNGRepresentation</span><span class="p">(</span><span class="n">image1</span><span class="p">);</span>

    <span class="n">XCTAssertEqualObjects</span><span class="p">(</span><span class="n">viewImage</span><span class="p">,</span> <span class="n">expectedImage</span><span class="p">,</span> <span class="s">@"View should look like the image"</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>The base is that we obtain the NSData representation of both images and we compare them, that will tell us if they match or doesn’t.</p>

<p>And that’s all for now. Now we have testable view cells. We need testable result cells and then we can start with BDD.</p>

<p>Remember you can find the code of this post in <a href="https://github.com/guillemf/Mastermind-BDD/tree/Step_5" title="MasterMind-BDD Step5">this commit</a>.</p>

<p>If you like it, please share! If you believe there is some part that needs more detail or want to suggest a new post like with Mocking, just send me your thoughts.</p>

<p>Thank you for reading me.</p>

<p>In the next post <a href="/blog/2014/11/10/bdd-mastermind-view-preparation/" title="BDD - Mastermind : View Preparation">BDD - Mastermind : View Preparation</a> we’ll find a more robust and maintainable way to create tests for the visual aspect.</p>]]></content><author><name>Guillem Efegé</name></author><category term="Development" /><category term="BDD" /><category term="TDD" /><summary type="html"><![CDATA[This is the fourth post to create an application using BDD and TDD in iOS. If you missed the previous post, my recommendation is that you read it first here.]]></summary></entry><entry><title type="html">BDD - Mastermind : TDD in the model</title><link href="http://localhost:4000/development/bdd/tdd/2014-09-29-bdd-mastermind-tdd-in-the-model.html" rel="alternate" type="text/html" title="BDD - Mastermind : TDD in the model" /><published>2014-09-29T17:06:51+02:00</published><updated>2014-09-29T17:06:51+02:00</updated><id>http://localhost:4000/development/bdd/tdd/bdd-mastermind-tdd-in-the-model</id><content type="html" xml:base="http://localhost:4000/development/bdd/tdd/2014-09-29-bdd-mastermind-tdd-in-the-model.html"><![CDATA[<p>This is the third post to create an application using BDD and TDD in iOS. If you missed the previous post, my recommendation is that you read it first <a href="/blog/2014/08/20/bdd-from-the-idea-to-the-app-2/" title="BDD: From the Idea to the App 2">here</a>.</p>

<p>It’s time to get your hands dirty. To make it really easy I’ve decided to tag each relevant commit with step numbers so you can follow step by step the process. I recommend you to code your own version, but if at some point you are lost, just checkout the step where you got lost and we’ll be synchronized again.</p>

<p>First thing to do is create your project and have it ready to run. You can create a new project or checkout <a href="https://github.com/guillemf/Mastermind-BDD/tree/Step_1" title="MasterMind-BDD Step1">this commit</a> or just checkout from terminal by :</p>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh">git clone git@github.com:guillemf/Mastermind-BDD.git 
git tag <span class="nt">-l</span>
git checkout tags/Step_1.</code></pre></figure>

<!-- more -->
<p>As you might now the process of TDD is basically writing a test, seeing how it fails, implement the solution and run again the test until it passes. I’m not going to go deep in what is TDD as there are many webs that explain very well how to do TDD like <a href="http://qualitycoding.org">Quality Coding</a> specially the screencast series starting with <a href="http://qualitycoding.org/objective-c-tdd/">Intro to Objectve-C TDD</a>.</p>

<p>So, assuming you know what is TDD and how to do it, let’s start our process.</p>

<p>What I do is take each requirement and try to dissect it in all the possible unitary tests I can do covering all possibilities. So let’s start on the first one.</p>

<ul>
  <li>Every time we start a new game, the model has to create a new secret combination.</li>
</ul>

<p>The first test to write is to be sure that right from the beginning there is something in combination. I write my first test and, following the method, I get my first error.</p>

<p><img src="https://farm3.staticflickr.com/2941/15217066667_a2f04c500c_o.png" alt="First Failing Test" title="Test 1 Fail" /></p>

<p>So I need to fix that situation, first by implementing MMModel class.</p>

<p>With this implementation</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">@interface</span> <span class="nc">MMModel</span> <span class="p">:</span> <span class="nc">NSObject</span>

<span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">strong</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">combination</span><span class="p">;</span>

<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MMModel</span>


<span class="k">-</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="n">init</span><span class="p">{</span>
    
    <span class="n">self</span> <span class="o">=</span> <span class="p">[</span><span class="n">super</span> <span class="nf">init</span><span class="p">];</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">self</span><span class="p">.</span><span class="n">combination</span> <span class="o">=</span> <span class="s">@""</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="n">self</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@end</span></code></pre></figure>

<p>The tests passes, things seem to go in the right way. Let’s face the second test. As it says every time we <strong>start</strong> a new game, a <strong>new combination</strong>, the next test seems obvious that it has to be something like:</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">testModelOnStartShouldGenerateANewCombination</span> <span class="p">{</span>
    
    <span class="n">MMModel</span> <span class="o">*</span><span class="n">model</span> <span class="o">=</span> <span class="p">[[</span><span class="n">MMModel</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>
    
    <span class="n">NSString</span> <span class="o">*</span><span class="n">originalCombination</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="n">combination</span><span class="p">;</span>
    
    <span class="p">[</span><span class="n">model</span> <span class="nf">start</span><span class="p">];</span>
    
    <span class="n">XCTAssertNotEqual</span><span class="p">(</span><span class="n">originalCombination</span><span class="p">,</span> <span class="n">model</span><span class="p">.</span><span class="n">combination</span><span class="p">,</span> <span class="s">@"After start the combination has to be different from the previous one"</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>But that only covers one iteration, and unit tests has to be <em>independent</em> on the contexts, that mean a random number of times, so let’s introduce a random number to repeat starts.</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">testModelOnStartShouldGenerateANewCombination</span> <span class="p">{</span>
    
    <span class="n">MMModel</span> <span class="o">*</span><span class="n">model</span> <span class="o">=</span> <span class="p">[[</span><span class="n">MMModel</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>
    
    <span class="kt">int</span> <span class="n">lowerBound</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">upperBound</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
    
    <span class="kt">int</span> <span class="n">rndValue</span> <span class="o">=</span> <span class="n">lowerBound</span> <span class="o">+</span> <span class="n">arc4random</span><span class="p">()</span> <span class="o">%</span> <span class="p">(</span><span class="n">upperBound</span> <span class="o">-</span> <span class="n">lowerBound</span><span class="p">);</span>
    
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">n</span><span class="o">&lt;=</span><span class="n">rndValue</span><span class="p">;</span> <span class="n">n</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        
        <span class="n">NSString</span> <span class="o">*</span><span class="n">originalCombination</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="n">combination</span><span class="p">;</span>
        <span class="p">[</span><span class="n">model</span> <span class="nf">start</span><span class="p">];</span>
        <span class="n">XCTAssertNotEqual</span><span class="p">(</span><span class="n">originalCombination</span><span class="p">,</span> <span class="n">model</span><span class="p">.</span><span class="n">combination</span><span class="p">,</span> <span class="s">@"After start the combination has to be different from the previous one"</span><span class="p">);</span>

    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>And this implementation</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">start</span> <span class="p">{</span>
    <span class="n">self</span><span class="p">.</span><span class="n">combination</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">stringWithFormat</span><span class="p">:</span><span class="s">@"%d"</span><span class="p">,</span> <span class="n">arc4random</span><span class="p">()];</span>
<span class="p">}</span></code></pre></figure>

<p>Makes the test pass. Yes, you might think “<em>Hey, that’s a trick. This is not a valid combination!!</em>” and you’d be right, but don’t forget TDD says “<strong>Write the minimum amount of code that makes the test pass</strong>”, and that’s what we are doing. Later on we’ll find that we need to change this implementation to pass other tests, but we’ll be sure we are not breaking the rules with the following and more complex tests we need to pass.</p>

<p>It’s time for some refactoring and we’ll move the declaration of model to the setup method. As we need a new combination from the start, we’ll also move a call to start in the model inside the creation. We run the tests by Cmd+U and see all still works.</p>

<p>Next requirement is :</p>

<ul>
  <li>The secret combination is four numbers long.</li>
</ul>

<p>So the tests are :</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">testModelSecretCombinationShouldContainFourNumbers</span>
<span class="p">{</span>
    <span class="n">XCTAssertEqual</span><span class="p">(</span><span class="n">model</span><span class="p">.</span><span class="n">combination</span><span class="p">.</span><span class="n">length</span><span class="p">,</span> <span class="mi">4ul</span><span class="p">,</span> <span class="s">@"Secrect combination length should be four"</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">testModelSecretCombinationIsNumeric</span>
<span class="p">{</span>
    <span class="n">NSCharacterSet</span><span class="o">*</span> <span class="n">nonNumbers</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSCharacterSet</span> <span class="nf">decimalDigitCharacterSet</span><span class="p">]</span> <span class="nf">invertedSet</span><span class="p">];</span>
    <span class="n">NSRange</span> <span class="n">r</span> <span class="o">=</span> <span class="p">[</span><span class="n">model</span><span class="p">.</span><span class="n">combination</span> <span class="nf">rangeOfCharacterFromSet</span><span class="p">:</span> <span class="n">nonNumbers</span><span class="p">];</span>
    
    <span class="n">XCTAssertEqual</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">location</span><span class="p">,</span> <span class="n">NSNotFound</span><span class="p">,</span> <span class="s">@"All digits should be numeric"</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>And here we have our first need of re-coding a part of the source to be able to pass those two tests. Try to do it by yourself and if you can’t see how to do it, you can go and checkout <a href="https://github.com/guillemf/Mastermind-BDD/tree/Step_2" title="MasterMind-BDD Step2">this commit</a>.</p>

<p>With the next requirement, things start becoming complicated and won’t be so easy in terms of coding.</p>

<ul>
  <li>The numbers in the combination are between 1 and 4.</li>
</ul>

<p>Let’s write the test to fail.</p>

<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">testModelSecretCombinationAllDigitsAreBetween1and4</span>
<span class="p">{</span>
    <span class="n">NSCharacterSet</span><span class="o">*</span> <span class="n">non1234</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSCharacterSet</span> <span class="nf">characterSetWithCharactersInString</span><span class="p">:</span><span class="s">@"1234"</span><span class="p">]</span> <span class="nf">invertedSet</span><span class="p">];</span>
    <span class="n">NSRange</span> <span class="n">r</span> <span class="o">=</span> <span class="p">[</span><span class="n">model</span><span class="p">.</span><span class="n">combination</span> <span class="nf">rangeOfCharacterFromSet</span><span class="p">:</span> <span class="n">non1234</span><span class="p">];</span>
    
    <span class="n">XCTAssertEqual</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">location</span><span class="p">,</span> <span class="n">NSNotFound</span><span class="p">,</span> <span class="s">@"All digits should be between 1 and 4"</span><span class="p">);</span>

<span class="p">}</span></code></pre></figure>

<p>Again all the challenge is inside <em>start</em> method in <em>MMModel.m</em>. It is a good practice to try to implement it by yourself. Once you are done, checkout <a href="https://github.com/guillemf/Mastermind-BDD/tree/Step_3" title="MasterMind-BDD Step3">Step 3</a> and you can compare your solution to mine and see how beautiful it is to see there are many ways to find a solution for the same problem. And remember to write <strong>the less possible code</strong> to pass the tests.</p>

<p>To not make this post eternal, I will just comment next requirement:</p>

<ul>
  <li>The numbers in the combination can be repeated.</li>
</ul>

<p>In this case we can’t write a test, at least in an easy way, about how to allow something. If opposite to this requirement it would be “<em>The numbers in the combination can be repeated</em>” it would be easy to traverse the digits and ensure there is no repetition, but as long as this is not a restriction, I won’t write a test for it. As usual, you can have a different opinion and write a test to verify it, I encourage you to do it and paste a comment explaining why you took that decision.</p>

<p>You’ll find the full code for this post in <a href="https://github.com/guillemf/Mastermind-BDD/tree/Step_4" title="MasterMind-BDD Step4">Step 4</a>.</p>

<p>In the next post <a href="/blog/2014/10/21/bdd-mastermind-view-preparation-to-make-the-ui-testable/" title="BDD - Mastermind : Preparation to make the UI Testable">BDD - Mastermind : Preparation to make the UI Testable</a> we’ll start preparing the views to implement it with BDD.</p>

<p>If you like it, please share! And leave me a comment if you have some time, I’d love to know this is helping someone ;)</p>]]></content><author><name>Guillem Efegé</name></author><category term="Development" /><category term="BDD" /><category term="TDD" /><summary type="html"><![CDATA[This is the third post to create an application using BDD and TDD in iOS. If you missed the previous post, my recommendation is that you read it first here.]]></summary></entry><entry><title type="html">BDD - Mastermind : Internal design</title><link href="http://localhost:4000/development/bdd/2014-09-25-bdd-mastermind-internal-design.html" rel="alternate" type="text/html" title="BDD - Mastermind : Internal design" /><published>2014-09-25T19:14:18+02:00</published><updated>2014-09-25T19:14:18+02:00</updated><id>http://localhost:4000/development/bdd/bdd-mastermind-internal-design</id><content type="html" xml:base="http://localhost:4000/development/bdd/2014-09-25-bdd-mastermind-internal-design.html"><![CDATA[<p>This is the second post to create an application using BDD and TDD in iOS. If you missed the first post, my recommendation is that you read it first <a href="/blog/2014/08/20/bdd-from-the-idea-to-the-app-2/" title="BDD: From the Idea to the App 2">here</a>.</p>

<p>In this post we are going to walk through the process of designing how we are going to architecture it internally and start writing down the first specifications that later on will become tests. I decided to structure it the way a “non technical” person would describe what she wants and then move it to the world of Unit Testing and Acceptance Tests.
<!-- more --></p>
<h2 id="first-tdd">First TDD</h2>

<p><img class="right" src="https://farm4.staticflickr.com/3896/15171494279_9dfcea90f6_n.jpg" width="320" height="297" title="MVC #1" />
Let’s begin by revisiting the most important design pattern used in iOS Development, <em>Model - View - Controller</em>. The internal design we are going to implement follows the classic schema. The first decision to make here is where to put the logic. I’ve seen many designs that include the logic in the controller and leave the model just as a mere repository. My understanding is that the controller should act as the “where to take this” and “where to put that”, not as the container of “what happens when y put this” or “what should I obtain when I deliver this”.</p>

<p>So, here is the first decision, the logic of the game will live in the model. Let’s write some requirements the model has to follow.</p>

<ul>
  <li>Every time we start a new game, the model has to create a new secret combination.</li>
  <li>The secret combination is four numbers long.</li>
  <li>The numbers in the combination are between 1 and 4.</li>
  <li>The numbers in the combination can be repeated.</li>
  <li>Every time we start a new game, the number of attempts has to be zero.</li>
  <li>The maximum number of attempts is nine.</li>
  <li>Only combinations of four numbers are accepted.</li>
  <li>The combinations can contain duplicated numbers.</li>
  <li>The numbers accepted in the combinations are between 1 and 4.</li>
  <li>Every time a new combination is inserted a new result will be generated.</li>
  <li>The result of a new combination inserted is a one letter “A” for each number that is in the secret combination in the right position and a letter “B” for each number that is in the combination but is not in the right position.</li>
  <li>If the result is “AAAA” no new combination will be accepted.</li>
  <li>If the number of attempts is nine and the last result is not “AAAA” no new combination will be accepted.</li>
  <li>Its has to be possible to obtain the history of the game being played at any moment, providing the ordered sequence of pairs combination-result.</li>
</ul>

<p>These are the requirements to follow. As you can see I’ve simplified the mastermind rules in order to make this exercise more understandable. We are not trying to create the final app but to understand what are we doing.</p>

<h2 id="now-bdd">Now BDD</h2>

<p>Now that we have the model specified, let’s go for the behavior we want for the app. These requirements are written in natural language and then we’ll rewrite later on in <a href="https://github.com/cucumber/cucumber/wiki/Gherkin" title="Gherkin Syntaxt Github">gherkin sintax</a>, which is the syntax used to describe the behavior that cucumber understands. As you will see, it is a very understandable syntax. Try to show the final result of the scenarios to a non technical person and see how easy she can understand and validate them, that’s the great advantage I find in this, it’s a bridge between devs and PO that both can understand and agree to a behavior with no interpretations and confusions.</p>

<p>Those could be the requirements. Note that we have to go to the very basic behavior to be sure nothing is left to no specification. If something is not explicitly defined, that means than nothing happens in that case.</p>

<ul>
  <li>The screen should contain nine rows and five columns.</li>
  <li>The left most column has to be gray.</li>
  <li>The other five columns has to be white.</li>
  <li>When I first open the app, a new game should be ready.</li>
  <li>When a new game starts, the screen should contain no colors and no results.</li>
</ul>

<p>Up to this point we have initial conditions. Let’s define the behavior to play.</p>

<ul>
  <li>When I tap on a white cell a red circle should appear.</li>
  <li>When I tap on a red circle cell, a yellow circle should appear.</li>
  <li>When I tap on a yellow circle, a green circle should appear.</li>
  <li>When I tap on a green circle, a blue circle should appear.</li>
  <li>When I tap on a blue circle, a red circle should appear.</li>
  <li>When I swipe my finger from left to right the combination should be validated.</li>
  <li>When a combination has been validated, no tap on that row will react.</li>
  <li>When a row has no validated combination above on tap on its cells should react.</li>
  <li>When the number of validated combinations is zero the first row will behave as if there was a validated row above it.</li>
</ul>

<p>The third group of specifications will be the behavior of the results and the reset of the game.</p>

<ul>
  <li>If a combination is not validated the left most cell of the row will show no content.</li>
  <li>When a cell is validated the left most cell of the row will show the result of the combination.</li>
  <li>For each color of the combination that is in the right position the result cell will show a black circle.</li>
  <li>For each color of the combination that is not in the right position the result cell will show a white circle.</li>
  <li>If there is a result cell showing four black colors the board shouldn’t react to any gesture except for the game reset.</li>
  <li>If I swipe the board from left to right the current game should finish and a new game should start.</li>
</ul>

<p>And this is all. We have created the specifications for all the rules and behaviors of the game. Of course we can define a lot more and be more exhaustive. But this is a good beginning.</p>

<p>In the next post <a href="/blog/2014/09/29/bdd-mastermind-tdd-in-the-model/" title="BDD - Mastermind : TDD in the Model">BDD - Mastermind : TDD in the Model</a> we’ll start implementing using TDD for the Model.</p>

<p>If you like it, please share! And leave me a comment if you have some time, I’d love to know this is helping someone ;)</p>]]></content><author><name>Guillem Efegé</name></author><category term="Development" /><category term="BDD" /><summary type="html"><![CDATA[This is the second post to create an application using BDD and TDD in iOS. If you missed the first post, my recommendation is that you read it first here.]]></summary></entry><entry><title type="html">BDD: From the idea to the App 2</title><link href="http://localhost:4000/development/extra/bdd/2014-08-20-bdd-from-the-idea-to-the-app-2.html" rel="alternate" type="text/html" title="BDD: From the idea to the App 2" /><published>2014-08-20T19:08:52+02:00</published><updated>2014-08-20T19:08:52+02:00</updated><id>http://localhost:4000/development/extra/bdd/bdd-from-the-idea-to-the-app-2</id><content type="html" xml:base="http://localhost:4000/development/extra/bdd/2014-08-20-bdd-from-the-idea-to-the-app-2.html"><![CDATA[<p>It’s been almost two years since I wrote my post from the idea to the App, and that’s a long time. Since then many things changed and I’ve been working a lot on BDD and TDD. So I guess this is a great moment to start a new series of posts about how to do the full process.</p>

<p>Last year I did a formation on iOS development. The final lessons consisted in creating a game, the Mastermind game. I think it is a good idea to use this example to build and app using TDD and BDD. Of course this process will not contain the full creation process with all details as it would take ages, even a book to do it, but I will include the headlines of the process with all the details and guides to complete the process, and of course with the code to do it.</p>

<p>Let’s start with it.</p>

<!-- more -->

<h2 id="introduction">Introduction</h2>

<p>We want to create the classic mastermind game. For those that doesn’t know how top play Mastermind can take a look at <a href="http://en.wikipedia.org/wiki/Mastermind_\(board_game\)" title="Mastermind in Wikipedia">wikipedia</a> where the rules are very well explained.</p>

<p><img class="left half" src="http://upload.wikimedia.org/wikipedia/commons/2/2d/Mastermind.jpg" width="150" height="158" title="Mastermind" alt="Mastermind board" /></p>

<p>In order to make this easier, let’s simplify some rules. We’ll make a fix number of games to play, let’s say nine, the codemaker will always be the iPhone and finally, there will be no points distribution, if the codebreaker guesses the pattern of colors before ten games, wins, otherwise loses.</p>

<p>Of course those restrictions can be released in the future, but for now, let’s do it this way.</p>

<h2 id="what-do-you-need-to-start-and-app">What do you need to start and App</h2>

<p><img class="right" src="https://farm6.staticflickr.com/5578/15101672880_79d001ba0f_o.jpg" width="190" height="390" title="Mastermind Sketch" alt="Mastermind board Sketch" /></p>

<p>The first job to be done is far from the keyboard. We all want to start typing and working with the mac and seeing how it is starting to look like we expect to see it, but the truth is that <strong>The better you prepare it all, the best result you’ll get</strong>.</p>

<p>So now let’s put our <em>Product Owner</em> hat on and let’s draw what we want. In this case, as we are going to create a game, we can start with the graphical part, because it will drive most of the subsequent user stories.</p>

<p>Drawn on paper it could look like something like this. I like to draw my first version with a pen or pencil so I can make easy and fast corrections as many times as I want. Once I am happy with the result, I will be able to proceed with more sophisticated tools or even ask a graphical designer to make a nice version of what I have on my mind to look as nicer as possible. But remember, one step at a time and don’t try starting to build your house by the roof.</p>

<p>The sketch contains all the information we need. It has a place to put the combinations. It has a place to show the result of the try. And it has enough space to repeat each try until the user gas the combination or consumes all the opportunities.</p>

<p>Easy right? Well now you can say you have not only an idea but also what it should look like. Next step is start with the analysis of what we’ve just drawn.</p>

<h2 id="first-task-analise-what-have-we-got-to-work-with">First task, Analise what have we got to work with</h2>

<p><img class="left" src="https://farm3.staticflickr.com/2941/15101651020_46fb32d967_o.jpg" width="190" height="390" title="Mastermind Sketch With zones" alt="Mastermind board Sketch with zones" /></p>

<p>First thing we can identify is that there are four different zones that we can identify.</p>

<p>1 - Left column is different from the rest. It will contain the results of the last combination we played.</p>

<p>2 - Four columns at the right of the first column. They will contain each of the combination we’ve tried in chronological order.</p>

<p>3 - Cell content with a special control that contains the result of the combination composed by the four colors at its right.</p>

<p>4 - Row contents with four cells, each with a color representing a combination.</p>

<p>I know this analysis might seem too basic and simplistic, but believe me, simple analysis lead to simple and effective solutions and makes you not missing any part of your project. In fact engineering is that, dividing problems in smaller problems and those in more smaller until we are able to find a solution for each one and then reintegrate them in one big solution.</p>

<p>And that’s all for this post. In the next post <a href="/blog/2014/09/25/bdd-mastermind-internal-design/" title="BDD - Mastermind : Internal Design">BDD - Mastermind : Internal Design</a> we’ll start writing the requirements for the graphic part so we can be able to transform them into scenarios we can test in our continuous integration system.</p>

<p>Please, don’t forget to share this post if you liked it.</p>]]></content><author><name>Guillem Efegé</name></author><category term="Development" /><category term="Extra" /><category term="BDD" /><summary type="html"><![CDATA[It’s been almost two years since I wrote my post from the idea to the App, and that’s a long time. Since then many things changed and I’ve been working a lot on BDD and TDD. So I guess this is a great moment to start a new series of posts about how to do the full process.]]></summary></entry></feed>